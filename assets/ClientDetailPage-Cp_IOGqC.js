import{c as x,e as f,r,j as e,L as i,M as j}from"./index-CckSQYX7.js";import{c as u}from"./clientService-ClE9BPpl.js";import{p}from"./productService-JC5t_XUH.js";import{A as N}from"./arrow-left-D-MHBYwI.js";import{S as y}from"./shopping-cart-BC1wlYWS.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=x("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),S=()=>{const{id:a}=f(),[s,d]=r.useState(null),[c,o]=r.useState([]),[m,n]=r.useState(!0);return r.useEffect(()=>{(async()=>{if(a){n(!0);try{const l=await u.getClient(a);d(l);const h=await p.getProductsByClientId(a);o(h)}catch(l){console.error("Failed to fetch client details:",l)}finally{n(!1)}}})()},[a]),m?e.jsx("div",{children:"Loading..."}):s?e.jsxs("div",{className:"container-page",children:[e.jsxs(i,{to:"/clients",className:"inline-flex items-center text-neutral-600 hover:text-neutral-900 mb-6",children:[e.jsx(N,{className:"h-4 w-4 mr-1"}),"Back to Clients"]}),e.jsxs("div",{className:"card p-6 mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-neutral-900",children:s.name}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-neutral-500",children:[s.email&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:s.email})]}),s.phone&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:s.phone})]})]}),s.address&&e.jsxs("address",{className:"mt-4 not-italic text-neutral-500",children:[s.address.street,", ",s.address.city,", ",s.address.state," ",s.address.zip,", ",s.address.country]})]}),e.jsxs("h2",{className:"text-2xl font-bold text-neutral-900 mb-4 flex items-center",children:[e.jsx(y,{className:"h-6 w-6 mr-2"}),"Purchase History"]}),e.jsx("div",{className:"card",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-4",children:"Product Name"}),e.jsx("th",{className:"text-left p-4",children:"Price"}),e.jsx("th",{className:"text-left p-4",children:"Date of Purchase"})]})}),e.jsxs("tbody",{children:[c.map(t=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-4",children:e.jsx(i,{to:`/product/${t.id}`,className:"text-primary-600 hover:underline",children:t.name})}),e.jsx("td",{className:"p-4",children:new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(t.sellingPrice||0)}),e.jsx("td",{className:"p-4",children:new Date(t.createdAt).toLocaleDateString()})]},t.id)),c.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"p-4 text-center text-neutral-500",children:"No purchase history found for this client."})})]})]})})]}):e.jsx("div",{children:"Client not found"})};export{S as default};
