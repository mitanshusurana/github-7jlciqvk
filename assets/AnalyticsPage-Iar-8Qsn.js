import{c as A,r as V,j as e,D as B}from"./index-CckSQYX7.js";import{u as T}from"./useProducts-D5CNA0u4.js";import{a as n,f as E}from"./formatters-DcVfRb3N.js";import{D as $}from"./dollar-sign-D_AAma0_.js";import{C as I}from"./calendar-C-pc60QW.js";import{R as m,a as P,T as x,L as g,C as p,X as y,Y as N,B as f}from"./generateCategoricalChart-Cz6pj0F8.js";import{P as R,a as k}from"./PieChart-D5D5rGwr.js";import{B as v}from"./BarChart-DUXDphSZ.js";import"./productService-JC5t_XUH.js";import"./index-Cohc17GS.js";import"./clsx-CSOyyOJo.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=A("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),q=()=>{const{products:c}=T(),r=(c==null?void 0:c.content)??[],a=V.useMemo(()=>{const s={},l={},d={};let u=0;r.forEach(t=>{s[t.category]=(s[t.category]||0)+1,l[t.type]=(l[t.type]||0)+1,typeof t.estimatedValue=="number"&&(u+=t.estimatedValue,d[t.category]=(d[t.category]||0)+t.estimatedValue)});const b=Object.entries(s).map(([t,i])=>({name:t,value:i})),D=Object.entries(l).map(([t,i])=>({name:t,value:i})).sort((t,i)=>i.value-t.value).slice(0,5),w=Object.entries(d).map(([t,i])=>({name:t,value:i})),o=new Date;o.setDate(o.getDate()-30);const C=r.filter(t=>new Date(t.createdAt)>o).sort((t,i)=>new Date(i.createdAt).getTime()-new Date(t.createdAt).getTime());return{categoryData:b,typeData:D,valueData:w,recentAdditions:C,totalValue:u,totalItems:r.length}},[r]),h=["#1A4B8C","#2E8B57","#E0115F","#F59E0B","#8B5CF6","#EC4899"],j=["#1A4B8C","#2E8B57","#E0115F"];return e.jsxs("div",{className:"container-page",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-neutral-900",children:"Analytics Dashboard"}),e.jsx("p",{className:"mt-1 text-neutral-500",children:"Visual insights into your product collection"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"rounded-full bg-primary-100 p-3 mr-4",children:e.jsx(B,{className:"h-6 w-6 text-primary-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-neutral-500",children:"Total Products"}),e.jsx("p",{className:"text-2xl font-semibold text-neutral-900",children:a.totalItems})]})]})}),e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"rounded-full bg-secondary-100 p-3 mr-4",children:e.jsx($,{className:"h-6 w-6 text-secondary-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-neutral-500",children:"Total Value"}),e.jsx("p",{className:"text-2xl font-semibold text-neutral-900",children:n(a.totalValue)})]})]})}),e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"rounded-full bg-accent-100 p-3 mr-4",children:e.jsx(I,{className:"h-6 w-6 text-accent-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-neutral-500",children:"Recent Additions"}),e.jsx("p",{className:"text-2xl font-semibold text-neutral-900",children:a.recentAdditions.length})]})]})}),e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"rounded-full bg-success-100 p-3 mr-4",children:e.jsx(F,{className:"h-6 w-6 text-success-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-neutral-500",children:"Avg. Value"}),e.jsx("p",{className:"text-2xl font-semibold text-neutral-900",children:a.totalItems>0?n(a.totalValue/a.totalItems):n(0)})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[e.jsxs("div",{className:"card p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-neutral-900 mb-4",children:"Distribution by Category"}),e.jsx("div",{className:"h-80",children:e.jsx(m,{width:"100%",height:"100%",children:e.jsxs(R,{children:[e.jsx(k,{data:a.categoryData,cx:"50%",cy:"50%",labelLine:!1,outerRadius:80,fill:"#8884d8",dataKey:"value",label:({name:s,percent:l})=>`${s}: ${(l*100).toFixed(0)}%`,children:a.categoryData.map((s,l)=>e.jsx(P,{fill:h[l%h.length]},`cell-${l}`))}),e.jsx(x,{formatter:s=>[`${s} products`,"Count"]}),e.jsx(g,{})]})})})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-neutral-900 mb-4",children:"Top Product Types"}),e.jsx("div",{className:"h-80",children:e.jsx(m,{width:"100%",height:"100%",children:e.jsxs(v,{data:a.typeData,layout:"vertical",margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(p,{strokeDasharray:"3 3"}),e.jsx(y,{type:"number"}),e.jsx(N,{dataKey:"name",type:"category",width:80}),e.jsx(x,{formatter:s=>[`${s} products`,"Count"]}),e.jsx(f,{dataKey:"value",fill:j[0]})]})})})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-neutral-900 mb-4",children:"Value by Category"}),e.jsx("div",{className:"h-80",children:e.jsx(m,{width:"100%",height:"100%",children:e.jsxs(v,{data:a.valueData,margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(p,{strokeDasharray:"3 3"}),e.jsx(y,{dataKey:"name"}),e.jsx(N,{}),e.jsx(x,{formatter:s=>[n(s),"Value"]}),e.jsx(g,{}),e.jsx(f,{dataKey:"value",fill:j[1]})]})})})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-neutral-900 mb-4",children:"Recent Additions"}),a.recentAdditions.length>0?e.jsx("div",{className:"overflow-hidden",children:e.jsx("ul",{className:"divide-y divide-neutral-200 max-h-80 overflow-y-auto pr-2",children:a.recentAdditions.map(s=>{var l;return e.jsxs("li",{className:"py-3 flex items-center",children:[e.jsx("div",{className:"w-10 h-10 rounded-md overflow-hidden mr-4",children:e.jsx("img",{src:s.images[0]||"https://images.pexels.com/photos/68740/diamond-gem-cubic-zirconia-jewel-68740.jpeg",alt:typeof s.name=="string"?s.name:((l=s.name)==null?void 0:l.toString())||"",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-neutral-900 truncate",children:s.name}),e.jsxs("p",{className:"text-xs text-neutral-500",children:[s.type," â€¢ ",s.weight," ct"]})]}),e.jsx("div",{className:"text-xs text-neutral-500",children:E(s.createdAt)})]},s.id)})})}):e.jsx("div",{className:"text-center py-10 text-neutral-500",children:"No products added in the last 30 days"})]})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-neutral-900 mb-4",children:"Collection Insights"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-primary-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-primary-800 font-medium mb-2",children:"Distribution"}),e.jsx("p",{className:"text-primary-700 text-sm",children:a.categoryData.length>0&&`Your collection is primarily ${a.categoryData[0].name} products (${Math.round(a.categoryData[0].value/a.totalItems*100)}%).`})]}),e.jsxs("div",{className:"bg-secondary-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-secondary-800 font-medium mb-2",children:"Value Distribution"}),e.jsx("p",{className:"text-secondary-700 text-sm",children:a.valueData.length>0&&`${a.valueData[0].name} products represent the highest value in your collection.`})]}),e.jsxs("div",{className:"bg-accent-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-accent-800 font-medium mb-2",children:"Collection Growth"}),e.jsx("p",{className:"text-accent-700 text-sm",children:`You've added ${a.recentAdditions.length} new products in the last 30 days.`})]})]})]})]})};export{q as default};
