import{R as C,j as e}from"./index-CckSQYX7.js";import{R as D,C as w,X as j,Y as b,T as k,L as O,B as S}from"./generateCategoricalChart-Cz6pj0F8.js";import{L as M,a as N}from"./LineChart-CAK5dJ_E.js";import{B as H}from"./BarChart-DUXDphSZ.js";import{r as v,a as d,t as x,g as T,f as h}from"./index-Cohc17GS.js";import"./clsx-CSOyyOJo.js";function _(s,t){v(2,arguments);var a=d(s),r=x(t);return isNaN(r)?new Date(NaN):(r&&a.setDate(a.getDate()+r),a)}function y(s,t){var a,r,i,n,o,m;v(1,arguments);var u=T(),l=x((a=(r=(i=(n=void 0)!==null&&n!==void 0?n:void 0)!==null&&i!==void 0?i:u.weekStartsOn)!==null&&r!==void 0?r:(o=u.locale)===null||o===void 0||(m=o.options)===null||m===void 0?void 0:m.weekStartsOn)!==null&&a!==void 0?a:0);if(!(l>=0&&l<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var c=d(s),f=c.getDay(),p=(f<l?7:0)+f-l;return c.setDate(c.getDate()-p),c.setHours(0,0,0,0),c}function I(s,t){v(2,arguments);var a=x(t),r=a*7;return _(s,r)}function R(s){v(1,arguments);var t=d(s),a=t.getMonth();return t.setFullYear(t.getFullYear(),a+1,0),t.setHours(23,59,59,999),t}function $(s,t){var a;v(1,arguments);var r=s||{},i=d(r.start),n=d(r.end),o=n.getTime();if(!(i.getTime()<=o))throw new RangeError("Invalid interval");var m=[],u=i;u.setHours(0,0,0,0);var l=Number((a=void 0)!==null&&a!==void 0?a:1);if(l<1||isNaN(l))throw new RangeError("`options.step` must be a number greater than 1");for(;u.getTime()<=o;)m.push(d(u)),u.setDate(u.getDate()+l),u.setHours(0,0,0,0);return m}function E(s){v(1,arguments);var t=s||{},a=d(t.start),r=d(t.end),i=r.getTime(),n=[];if(!(a.getTime()<=i))throw new RangeError("Invalid interval");var o=a;for(o.setHours(0,0,0,0),o.setDate(1);o.getTime()<=i;)n.push(d(o)),o.setMonth(o.getMonth()+1);return n}function Y(s,t){v(1,arguments);var a=s||{},r=d(a.start),i=d(a.end),n=i.getTime();if(!(r.getTime()<=n))throw new RangeError("Invalid interval");var o=y(r,t),m=y(i,t);o.setHours(15),m.setHours(15),n=m.getTime();for(var u=[],l=o;l.getTime()<=n;)l.setHours(0),u.push(d(l)),l=I(l,1),l.setHours(15);return u}function F(s){v(1,arguments);var t=d(s);return t.setDate(1),t.setHours(0,0,0,0),t}function W(s){v(1,arguments);var t=d(s),a=t.getFullYear();return t.setFullYear(a+1,0,0),t.setHours(23,59,59,999),t}function K(s){v(1,arguments);var t=d(s),a=new Date(0);return a.setFullYear(t.getFullYear(),0,1),a.setHours(0,0,0,0),a}function A(s,t){var a,r,i,n,o,m;v(1,arguments);var u=T(),l=x((a=(r=(i=(n=void 0)!==null&&n!==void 0?n:void 0)!==null&&i!==void 0?i:u.weekStartsOn)!==null&&r!==void 0?r:(o=u.locale)===null||o===void 0||(m=o.options)===null||m===void 0?void 0:m.weekStartsOn)!==null&&a!==void 0?a:0);if(!(l>=0&&l<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var c=d(s),f=c.getDay(),p=(f<l?-7:0)+6-(f-l);return c.setDate(c.getDate()+p),c.setHours(23,59,59,999),c}const g=[{date:"2023-01-15",sales:4e3},{date:"2023-01-22",sales:3e3},{date:"2023-02-05",sales:5e3},{date:"2023-02-12",sales:4500},{date:"2023-03-05",sales:6e3},{date:"2023-03-12",sales:5500}],B=[{id:"1",orderNumber:"#1001",customerName:"John Doe",totalPrice:1500,status:"paid",date:new Date().toISOString(),items:[]},{id:"2",orderNumber:"#1002",customerName:"Jane Smith",totalPrice:2500,status:"shipped",date:new Date().toISOString(),items:[]},{id:"3",orderNumber:"#1003",customerName:"John Doe",totalPrice:500,status:"paid",date:new Date().toISOString(),items:[]},{id:"4",orderNumber:"#1004",customerName:"Bob Johnson",totalPrice:5e3,status:"paid",date:new Date().toISOString(),items:[]}],J=B.reduce((s,t)=>{const a=s[t.customerName]||{name:t.customerName,totalSpent:0,orderCount:0};return a.totalSpent+=t.totalPrice,a.orderCount+=1,s[t.customerName]=a,s},{}),L=Object.values(J),U=()=>{const[s,t]=C.useState("monthly"),a=()=>{const r=new Date;switch(s){case"daily":return $({start:y(r),end:A(r)}).map(i=>{var n;return{name:h(i,"EEE"),sales:((n=g.find(o=>h(new Date(o.date),"yyyy-MM-dd")===h(i,"yyyy-MM-dd")))==null?void 0:n.sales)||0}});case"weekly":return Y({start:F(r),end:R(r)}).map(i=>({name:`Week of ${h(i,"MMM d")}`,sales:g.filter(n=>y(new Date(n.date))===i).reduce((n,o)=>n+o.sales,0)}));case"monthly":return E({start:K(r),end:W(r)}).map(i=>({name:h(i,"MMM"),sales:g.filter(n=>h(new Date(n.date),"yyyy-MM")===h(i,"yyyy-MM")).reduce((n,o)=>n+o.sales,0)}));default:return[]}};return e.jsxs("div",{className:"container-page",children:[e.jsx("h1",{className:"text-3xl font-bold text-neutral-900 mb-8",children:"Advanced Analytics"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Sales Trends"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>t("daily"),className:`btn-sm ${s==="daily"?"btn-primary":"btn-outline"}`,children:"Daily"}),e.jsx("button",{onClick:()=>t("weekly"),className:`btn-sm ${s==="weekly"?"btn-primary":"btn-outline"}`,children:"Weekly"}),e.jsx("button",{onClick:()=>t("monthly"),className:`btn-sm ${s==="monthly"?"btn-primary":"btn-outline"}`,children:"Monthly"})]})]}),e.jsx(D,{width:"100%",height:300,children:e.jsxs(M,{data:a(),children:[e.jsx(w,{strokeDasharray:"3 3"}),e.jsx(j,{dataKey:"name"}),e.jsx(b,{}),e.jsx(k,{}),e.jsx(O,{}),e.jsx(N,{type:"monotone",dataKey:"sales",stroke:"#8884d8"})]})})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Customer Segmentation"}),e.jsx(D,{width:"100%",height:300,children:e.jsxs(H,{data:L,children:[e.jsx(w,{strokeDasharray:"3 3"}),e.jsx(j,{dataKey:"name"}),e.jsx(b,{}),e.jsx(k,{}),e.jsx(O,{}),e.jsx(S,{dataKey:"totalSpent",fill:"#8884d8",name:"Total Spent"}),e.jsx(S,{dataKey:"orderCount",fill:"#82ca9d",name:"Order Count"})]})})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Sales Forecast"}),e.jsx(D,{width:"100%",height:300,children:e.jsxs(M,{data:[...g,{name:"Jul",sales:6500},{name:"Aug",sales:7e3}],children:[e.jsx(w,{strokeDasharray:"3 3"}),e.jsx(j,{dataKey:"name"}),e.jsx(b,{}),e.jsx(k,{}),e.jsx(O,{}),e.jsx(N,{type:"monotone",dataKey:"sales",stroke:"#8884d8"}),e.jsx(N,{type:"monotone",dataKey:"sales",stroke:"#82ca9d",strokeDasharray:"5 5",name:"Forecast"})]})})]})]})]})};export{U as default};
