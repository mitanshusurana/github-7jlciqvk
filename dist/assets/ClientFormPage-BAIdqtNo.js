import{c as f,f as N,u as b,r,j as e,L as x,V as n}from"./index-BkUxVZaB.js";import{F as v,a as y,b as s,E as h}from"./formik.esm-DW3Up1cQ.js";import{c as g,a as u}from"./index.esm-DgzsvJR_.js";import{c}from"./clientService-ClE9BPpl.js";import{A as C}from"./arrow-left-DE6iWCAM.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=f("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),z=()=>{const{id:a}=N(),j=b(),i=!!a,[d,m]=r.useState(null),[p,o]=r.useState(!!a);return r.useEffect(()=>{(async()=>{if(a){o(!0);const t=await c.getClient(a);t&&m(t),o(!1)}else m({id:"",name:"",email:"",phone:"",address:{street:"",city:"",state:"",zip:"",country:""},createdAt:"",updatedAt:""})})()},[a]),p||!d?e.jsx("div",{children:"Loading..."}):e.jsxs("div",{className:"container-page",children:[e.jsxs(x,{to:"/clients",className:"inline-flex items-center text-neutral-600 hover:text-neutral-900 mb-6",children:[e.jsx(C,{className:"h-4 w-4 mr-1"}),"Back to Clients"]}),e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsx("h1",{className:"text-3xl font-bold text-neutral-900 mb-6",children:i?"Edit Client":"Add New Client"}),e.jsx(v,{initialValues:d,validationSchema:g().shape({name:u().required("Name is required"),email:u().email("Invalid email")}),onSubmit:async l=>{try{i?(await c.updateClient(a,l),n.success("Client updated successfully")):(await c.addClient(l),n.success("Client added successfully")),j("/clients")}catch(t){n.error("Failed to save client"),console.error("Error saving client:",t)}},enableReinitialize:!0,children:({isSubmitting:l})=>e.jsxs(y,{className:"space-y-6 card p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"form-label",children:"Name"}),e.jsx(s,{name:"name",className:"form-input"}),e.jsx(h,{name:"name",component:"div",className:"text-error-600 text-sm mt-1"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"form-label",children:"Email"}),e.jsx(s,{name:"email",type:"email",className:"form-input"}),e.jsx(h,{name:"email",component:"div",className:"text-error-600 text-sm mt-1"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"form-label",children:"Phone"}),e.jsx(s,{name:"phone",className:"form-input"})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-neutral-900 mb-4",children:"Address"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"address.street",className:"form-label",children:"Street"}),e.jsx(s,{name:"address.street",className:"form-input"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"address.city",className:"form-label",children:"City"}),e.jsx(s,{name:"address.city",className:"form-input"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"address.state",className:"form-label",children:"State"}),e.jsx(s,{name:"address.state",className:"form-input"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"address.zip",className:"form-label",children:"Zip Code"}),e.jsx(s,{name:"address.zip",className:"form-input"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"address.country",className:"form-label",children:"Country"}),e.jsx(s,{name:"address.country",className:"form-input"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx(x,{to:"/clients",className:"btn-outline",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:l,className:"btn-primary",children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),i?"Save Changes":"Add Client"]})]})]})})]})]})};export{z as default};
